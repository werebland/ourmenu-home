{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Chris/ourmenu-home/pages/request-demo.js\";\nimport React, { Component, Fragment } from 'react';\nimport Head from 'next/head';\nimport styled from 'styled-components';\nimport { typography, layout, space, color, display, flexbox, border } from 'styled-system';\nimport { withRouter } from 'next/router';\nimport Dropzone from 'react-dropzone';\nimport base from '../config';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/storage';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nvar storageRef = firebase.storage().ref();\nvar PageWrapper = styled.div.withConfig({\n  displayName: \"request-demo__PageWrapper\",\n  componentId: \"sc-1fjagif-0\"\n})([\"\"]);\nvar PageHeader = styled.div.withConfig({\n  displayName: \"request-demo__PageHeader\",\n  componentId: \"sc-1fjagif-1\"\n})({\n  boxSizing: 'border-box'\n}, color, layout, space, display, flexbox);\nvar PageTitle = styled.h1.withConfig({\n  displayName: \"request-demo__PageTitle\",\n  componentId: \"sc-1fjagif-2\"\n})({}, typography, color, space);\nvar PageSubtitle = styled.h3.withConfig({\n  displayName: \"request-demo__PageSubtitle\",\n  componentId: \"sc-1fjagif-3\"\n})({}, typography, color, space);\nvar PageContent = styled.div.withConfig({\n  displayName: \"request-demo__PageContent\",\n  componentId: \"sc-1fjagif-4\"\n})({\n  boxSizing: 'border-box'\n}, space, display, flexbox);\nvar Form = styled.form.withConfig({\n  displayName: \"request-demo__Form\",\n  componentId: \"sc-1fjagif-5\"\n})({\n  boxSizing: 'boder-box'\n}, layout, border, space, flexbox, display);\nvar Uploader = styled.div.withConfig({\n  displayName: \"request-demo__Uploader\",\n  componentId: \"sc-1fjagif-6\"\n})({\n  boxSizing: 'border-box'\n}, border, color, layout, display, flexbox, space, color, typography);\nvar File = styled.div.withConfig({\n  displayName: \"request-demo__File\",\n  componentId: \"sc-1fjagif-7\"\n})({\n  boxSizing: 'border-box',\n  '& span': {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}, display, flexbox, layout, space, color, border);\nvar Label = styled.label.withConfig({\n  displayName: \"request-demo__Label\",\n  componentId: \"sc-1fjagif-8\"\n})({}, typography, color, space);\nvar Input = styled.input.withConfig({\n  displayName: \"request-demo__Input\",\n  componentId: \"sc-1fjagif-9\"\n})({}, display, layout, space, border, typography);\nvar Textarea = styled.textarea.withConfig({\n  displayName: \"request-demo__Textarea\",\n  componentId: \"sc-1fjagif-10\"\n})({}, display, layout, space, border, typography);\nvar Submit = styled.input.withConfig({\n  displayName: \"request-demo__Submit\",\n  componentId: \"sc-1fjagif-11\"\n})({\n  boxSizing: 'border-box',\n  transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n  ':hover': {\n    backgroundColor: '#fff',\n    color: '#1a1a1a'\n  }\n}, border, flexbox, space, typography, color);\nvar Success = styled.div.withConfig({\n  displayName: \"request-demo__Success\",\n  componentId: \"sc-1fjagif-12\"\n})({}, display, flexbox);\nvar SuccessEmoji = styled.span.withConfig({\n  displayName: \"request-demo__SuccessEmoji\",\n  componentId: \"sc-1fjagif-13\"\n})({}, typography, display, flexbox);\nvar SuccessTitle = styled.h4.withConfig({\n  displayName: \"request-demo__SuccessTitle\",\n  componentId: \"sc-1fjagif-14\"\n})({}, typography, display, flexbox, color, space);\nvar SuccessSubtitle = styled.span.withConfig({\n  displayName: \"request-demo__SuccessSubtitle\",\n  componentId: \"sc-1fjagif-15\"\n})({}, typography, display, flexbox, color, space);\n\nvar RequestDemo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RequestDemo, _Component);\n\n  function RequestDemo(props) {\n    var _this;\n\n    _classCallCheck(this, RequestDemo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RequestDemo).call(this, props));\n    _this.state = {\n      email: _this.props.router.query.email || \"\",\n      name: \"\",\n      menus: [],\n      isSuccess: false\n    };\n    return _this;\n  }\n\n  _createClass(RequestDemo, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var _this$state = this.state,\n          name = _this$state.name,\n          email = _this$state.email,\n          menus = _this$state.menus;\n      var data = {\n        name: name,\n        email: email,\n        menus: []\n      };\n      base.addToCollection('users', data).then(function (data) {\n        console.log(data.id);\n\n        if (menus.length > 0) {\n          _this2.handleUpload(data.id);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"handleUpload\",\n    value: function handleUpload(id) {\n      var files = this.state.menus;\n      var downloadLinks = [];\n      var self = this;\n      files.forEach(function (file) {\n        var metadata = {\n          contentType: 'image/jpeg'\n        };\n        var uploadTask = storageRef.child(\"users/\".concat(id, \"/menus/\").concat(file.name)).put(file, metadata);\n        uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\n        function (snapshot) {\n          // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n          var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n          console.log('Upload is ' + progress + '% done');\n\n          switch (snapshot.state) {\n            case firebase.storage.TaskState.PAUSED:\n              // or 'paused'\n              console.log('Upload is paused');\n              break;\n\n            case firebase.storage.TaskState.RUNNING:\n              // or 'running'\n              console.log('Upload is running');\n              break;\n          }\n        }, function (error) {\n          // A full list of error codes is available at\n          // https://firebase.google.com/docs/storage/web/handle-errors\n          switch (error.code) {\n            case 'storage/unauthorized':\n              console.log('unauthorized');\n              break;\n\n            case 'storage/canceled':\n              console.log('canceled');\n              break;\n\n            case 'storage/unknown':\n              console.log('idk');\n              break;\n          }\n        }, function () {\n          // Upload completed successfully, now we can get the download URL\n          uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n            downloadLinks.push(downloadURL);\n            console.log(downloadLinks);\n\n            if (downloadLinks.length === files.length) {\n              console.log('files uploaded');\n              var data = {\n                menus: downloadLinks\n              };\n              base.updateDoc(\"users/\".concat(id), data).then(function () {\n                console.log('doc updated');\n                self.setState({\n                  isSuccess: true\n                });\n              }).catch(function (err) {\n                console.log(err);\n              });\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(files) {\n      console.log(files);\n      var menus = this.state.menus;\n      files.forEach(function (file) {\n        return menus.push(file);\n      });\n      console.log(menus);\n      this.setState({\n        menus: menus\n      });\n    }\n  }, {\n    key: \"removeFile\",\n    value: function removeFile(i) {\n      var menus = this.state.menus;\n      menus.splice(i, 1);\n      this.setState({\n        menus: menus\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(PageWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Get a free custom demo | OurMenu\"), React.createElement(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=0.86, maximum-scale=3.0, minimum-scale=0.86\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"apple-touch-icon\",\n        sizes: \"180x180\",\n        href: \"/static/apple-touch-icon.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"icon\",\n        type: \"image/png\",\n        sizes: \"32x32\",\n        href: \"/static/favicon-32x32.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"icon\",\n        type: \"image/png\",\n        sizes: \"16x16\",\n        href: \"/static/favicon-16x16.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"manifest\",\n        href: \"/static/site.webmanifest\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"mask-icon\",\n        href: \"/static/safari-pinned-tab.svg\",\n        color: \"#000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), React.createElement(\"link\", {\n        rel: \"shortcut icon\",\n        href: \"/static/favicon.ico\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }), React.createElement(\"meta\", {\n        name: \"msapplication-TileColor\",\n        content: \"#000000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }), React.createElement(\"meta\", {\n        name: \"msapplication-config\",\n        content: \"/static/browserconfig.xml\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }), React.createElement(\"meta\", {\n        name: \"theme-color\",\n        content: \"#000\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      })), React.createElement(Nav, {\n        transparent: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(PageHeader, {\n        width: \"100vw\",\n        minHeight: \"50vh\",\n        bg: \"blue\",\n        color: \"black\",\n        pt: \"196px\",\n        pl: ['16px', '24px', '56px'],\n        pr: ['16px', '24px', '56px'],\n        pb: ['16px', '24px', '56px'],\n        display: \"flex\",\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(PageTitle, {\n        fontSize: \"4.5rem\",\n        fontWeight: \"bold\",\n        lineHeight: \"5rem\",\n        color: \"black\",\n        m: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"See what you're missing.\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }), \"Get a custom demo.\")), React.createElement(PageContent, {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"center\",\n        p: ['16px', '24px', '56px'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(Form, {\n        width: \"100%\",\n        maxWidth: \"560px\",\n        border: \"2px solid\",\n        borderColor: \"black\",\n        borderRadius: \"8px\",\n        p: \"24px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        onSubmit: function onSubmit(e) {\n          return _this3.handleSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, this.state.isSuccess ? React.createElement(Success, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(SuccessEmoji, {\n        fontSize: \"3rem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, \"\\uD83C\\uDF89\"), React.createElement(SuccessTitle, {\n        fontSize: \"1.75rem\",\n        fontWeight: \"bold\",\n        color: \"black\",\n        m: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, this.state.name.split(\"\")[0], \", your custom demo is on the way.\")) : React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(Dropzone, {\n        multiple: true,\n        onDrop: function onDrop(acceptedFiles) {\n          return _this3.handleDrop(acceptedFiles);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, function (_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            isDragActive = _ref.isDragActive,\n            isDragAccept = _ref.isDragAccept,\n            isDragReject = _ref.isDragReject;\n        return React.createElement(\"section\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 382\n          },\n          __self: this\n        }, React.createElement(Uploader, _extends({\n          border: \"2px solid\",\n          borderColor: \"lightGrey\",\n          borderRadius: \"8px\",\n          borderStyle: \"dashed\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          width: \"100%\",\n          height: \"100%\",\n          minHeight: \"160px\",\n          p: \"48px\",\n          mb: \"16px\",\n          fontSize: \"1rem\",\n          fontWeight: \"bold\",\n          color: \"grey\",\n          bg: isDragActive ? 'lightGrey' : 'white'\n        }, getRootProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383\n          },\n          __self: this\n        }), React.createElement(\"input\", _extends({}, getInputProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402\n          },\n          __self: this\n        })), \"Drop your menus here or click to upload\"));\n      }), this.state.menus.map(function (file, i) {\n        return React.createElement(File, {\n          key: file.path,\n          width: \"100%\",\n          display: \"inline-flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          p: \"16px 24px\",\n          borderRadius: \"8px\",\n          bg: \"black\",\n          color: \"white\",\n          mb: \"8px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 409\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }, file.path), React.createElement(\"span\", {\n          onClick: function onClick() {\n            return _this3.removeFile(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, React.createElement(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"#fff\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422\n          },\n          __self: this\n        }, React.createElement(\"path\", {\n          d: \"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423\n          },\n          __self: this\n        }))));\n      }), React.createElement(Label, {\n        fontSize: \".875rem\",\n        fontWeight: \"bold\",\n        color: \"grey\",\n        mb: \"4px\",\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, \"Full name*\"), React.createElement(Input, {\n        border: \"2px solid\",\n        borderColor: \"black\",\n        borderRadius: \"8px\",\n        display: \"flex\",\n        p: \"8px 16px\",\n        mb: \"16px\",\n        fontSize: \"1.25rem\",\n        fontWeight: \"regular\",\n        color: \"black\",\n        placeholder: \"Your name\",\n        type: \"text\",\n        autoComplete: \"on\",\n        required: true,\n        value: this.state.name,\n        name: \"name\",\n        onChange: function onChange(e) {\n          return _this3.handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }), React.createElement(Label, {\n        fontSize: \".875rem\",\n        fontWeight: \"bold\",\n        color: \"grey\",\n        mb: \"4px\",\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, \"Email*\"), React.createElement(Input, {\n        border: \"2px solid\",\n        borderColor: \"black\",\n        borderRadius: \"8px\",\n        display: \"flex\",\n        flex: \"1\",\n        p: \"8px 16px\",\n        mb: \"16px\",\n        fontSize: \"1.25rem\",\n        fontWeight: \"regular\",\n        color: \"black\",\n        placeholder: \"Your email\",\n        type: \"email\",\n        autoComplete: \"on\",\n        required: true,\n        value: this.state.email,\n        name: \"email\",\n        onChange: function onChange(e) {\n          return _this3.handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }), React.createElement(Submit, {\n        border: \"2px solid\",\n        borderRadius: \"8px\",\n        borderColor: \"black\",\n        p: \"16px 24px\",\n        fontSize: \"1rem\",\n        fontWeight: \"bold\",\n        color: \"black\",\n        bg: \"blue\",\n        type: \"submit\",\n        value: \"Request your demo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      })))), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RequestDemo;\n}(Component);\n\nexport default withRouter(RequestDemo);","map":{"version":3,"sources":["/Users/Chris/ourmenu-home/pages/request-demo.js"],"names":["React","Component","Fragment","Head","styled","typography","layout","space","color","display","flexbox","border","withRouter","Dropzone","base","firebase","Nav","Footer","storageRef","storage","ref","PageWrapper","div","PageHeader","boxSizing","PageTitle","h1","PageSubtitle","h3","PageContent","Form","form","Uploader","File","alignItems","justifyContent","Label","label","Input","input","Textarea","textarea","Submit","transition","backgroundColor","Success","SuccessEmoji","span","SuccessTitle","h4","SuccessSubtitle","RequestDemo","props","state","email","router","query","name","menus","isSuccess","e","setState","target","value","preventDefault","data","addToCollection","then","console","log","id","length","handleUpload","catch","err","files","downloadLinks","self","forEach","file","metadata","contentType","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","downloadURL","push","updateDoc","i","splice","handleSubmit","split","acceptedFiles","handleDrop","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","map","path","removeFile","handleChange"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Head from 'next/head'\nimport styled from 'styled-components';\nimport {\n  typography,\n  layout,\n  space,\n  color,\n  display,\n  flexbox,\n  border,\n} from 'styled-system'\nimport { withRouter } from 'next/router';\nimport Dropzone from 'react-dropzone'\nimport base from '../config'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/storage'\n\nimport Nav from '../components/Nav'\nimport Footer from '../components/Footer'\n\nvar storageRef = firebase.storage().ref();\n\nconst PageWrapper = styled.div`\n\n`;\n\nconst PageHeader = styled.div(\n  {\n    boxSizing: 'border-box',\n  },\n  color,\n  layout,\n  space,\n  display,\n  flexbox,\n);\n\nconst PageTitle = styled.h1(\n  {},\n  typography,\n  color,\n  space,\n);\n\nconst PageSubtitle = styled.h3(\n  {},\n  typography,\n  color,\n  space,\n);\n\nconst PageContent = styled.div(\n  {\n    boxSizing: 'border-box',\n  },\n  space,\n  display,\n  flexbox,\n);\n\nconst Form = styled.form(\n  {\n    boxSizing: 'boder-box'\n  },\n  layout,\n  border,\n  space,\n  flexbox,\n  display,\n);\n\nconst Uploader = styled.div(\n  {\n    boxSizing: 'border-box',\n  },\n  border,\n  color,\n  layout,\n  display,\n  flexbox,\n  space,\n  color,\n  typography,\n);\n\nconst File = styled.div(\n  {\n    boxSizing: 'border-box',\n\n    '& span': {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  },\n  display,\n  flexbox,\n  layout,\n  space,\n  color,\n  border,\n);\n\nconst Label = styled.label(\n  {},\n  typography,\n  color,\n  space,\n);\n\nconst Input = styled.input(\n  {\n  },\n  display,\n  layout,\n  space,\n  border,\n  typography,\n);\n\nconst Textarea = styled.textarea(\n  {},\n  display,\n  layout,\n  space,\n  border,\n  typography,\n);\n\nconst Submit = styled.input(\n  {\n    boxSizing: 'border-box',\n    transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\n    ':hover': {\n      backgroundColor: '#fff',\n      color: '#1a1a1a',\n    }\n  },\n  border,\n  flexbox,\n  space,\n  typography,\n  color,\n);\n\nconst Success = styled.div(\n  {},\n  display,\n  flexbox,\n);\n\nconst SuccessEmoji = styled.span(\n  {},\n  typography,\n  display,\n  flexbox,\n);\n\nconst SuccessTitle = styled.h4(\n  {},\n  typography,\n  display,\n  flexbox,\n  color,\n  space,\n);\n\nconst SuccessSubtitle = styled.span(\n  {},\n  typography,\n  display,\n  flexbox,\n  color,\n  space,\n);\n\nclass RequestDemo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: this.props.router.query.email || \"\",\n      name: \"\",\n      menus: [],\n      isSuccess: false,\n    }\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  handleSubmit(e) {\n    e.preventDefault()\n    const { name, email, menus } = this.state\n    const data = {\n      name,\n      email,\n      menus: []\n    }\n    base.addToCollection('users', data)\n      .then((data) => {\n        console.log(data.id)\n        if (menus.length > 0) {\n          this.handleUpload(data.id)\n        }\n      }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleUpload(id) {\n    const files = this.state.menus\n    let downloadLinks = []\n    const self = this\n    files.forEach(function(file) {\n      var metadata = {\n        contentType: 'image/jpeg'\n      };\n      var uploadTask = storageRef.child(`users/${id}/menus/${file.name}`).put(file, metadata);\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\n      function(snapshot) {\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload is ' + progress + '% done');\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload is running');\n            break;\n        }\n      }, function(error) {\n\n      // A full list of error codes is available at\n      // https://firebase.google.com/docs/storage/web/handle-errors\n      switch (error.code) {\n        case 'storage/unauthorized':\n          console.log('unauthorized');\n          break;\n\n        case 'storage/canceled':\n          console.log('canceled');\n          break;\n\n        case 'storage/unknown':\n          console.log('idk');\n          break;\n      }\n    }, function() {\n      // Upload completed successfully, now we can get the download URL\n      uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n        downloadLinks.push(downloadURL)\n        console.log(downloadLinks);\n        if (downloadLinks.length === files.length) {\n          console.log('files uploaded');\n          const data = {\n            menus: downloadLinks\n          }\n          base.updateDoc(`users/${id}`, data)\n          .then(() => {\n              console.log('doc updated');\n              self.setState({\n                isSuccess: true\n              })\n            }).catch(err => {\n              console.log(err);\n          });\n        }\n      });\n      });\n    })\n  }\n\n  handleDrop(files) {\n    console.log(files);\n    let { menus } = this.state\n    files.forEach((file) => menus.push(file))\n    console.log(menus);\n    this.setState({\n      menus\n    })\n  }\n\n  removeFile(i) {\n    let { menus } = this.state\n    menus.splice(i, 1)\n    this.setState({\n      menus\n    })\n  }\n\n  render() {\n    return (\n      <PageWrapper>\n        <Head>\n          <title>\n            Get a free custom demo | OurMenu\n          </title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=0.86, maximum-scale=3.0, minimum-scale=0.86\" />\n          <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/static/apple-touch-icon.png\"/>\n          <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/static/favicon-32x32.png\"/>\n          <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/static/favicon-16x16.png\"/>\n          <link rel=\"manifest\" href=\"/static/site.webmanifest\"/>\n          <link rel=\"mask-icon\" href=\"/static/safari-pinned-tab.svg\" color=\"#000\"/>\n          <link rel=\"shortcut icon\" href=\"/static/favicon.ico\"/>\n          <meta name=\"msapplication-TileColor\" content=\"#000000\"/>\n          <meta name=\"msapplication-config\" content=\"/static/browserconfig.xml\"/>\n          <meta name=\"theme-color\" content=\"#000\"/>\n        </Head>\n        <Nav transparent/>\n        <PageHeader\n          width=\"100vw\"\n          minHeight=\"50vh\"\n          bg=\"blue\"\n          color=\"black\"\n          pt=\"196px\"\n          pl={['16px', '24px', '56px']}\n          pr={['16px', '24px', '56px']}\n          pb={['16px', '24px', '56px']}\n          display=\"flex\"\n          alignItems=\"center\"\n        >\n          <PageTitle\n            fontSize=\"4.5rem\"\n            fontWeight=\"bold\"\n            lineHeight=\"5rem\"\n            color=\"black\"\n            m=\"0\"\n          >\n            See what you're missing.\n            <br/>\n            Get a custom demo.\n          </PageTitle>\n        </PageHeader>\n        <PageContent\n          display=\"flex\"\n          alignItems=\"flex-start\"\n          justifyContent=\"center\"\n          p={['16px', '24px', '56px']}\n        >\n          <Form\n            width=\"100%\"\n            maxWidth=\"560px\"\n            border=\"2px solid\"\n            borderColor=\"black\"\n            borderRadius=\"8px\"\n            p=\"24px\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            onSubmit={(e) => this.handleSubmit(e)}\n          >\n            {this.state.isSuccess\n              ?\n              <Success>\n                <SuccessEmoji\n                  fontSize=\"3rem\"\n                >\n                  🎉\n                </SuccessEmoji>\n                <SuccessTitle\n                  fontSize=\"1.75rem\"\n                  fontWeight=\"bold\"\n                  color=\"black\"\n                  m=\"0\"\n                >\n                  {this.state.name.split(\"\")[0]}, your custom demo is on the way.\n                </SuccessTitle>\n              </Success>\n              :\n              <Fragment>\n                <Dropzone\n                  multiple\n                  onDrop={acceptedFiles => this.handleDrop(acceptedFiles)}\n                >\n                  {({getRootProps, getInputProps, isDragActive, isDragAccept, isDragReject}) => (\n                    <section>\n                      <Uploader\n                      border=\"2px solid\"\n                      borderColor=\"lightGrey\"\n                      borderRadius=\"8px\"\n                      borderStyle=\"dashed\"\n                      display=\"flex\"\n                      flexDirection=\"column\"\n                      alignItems=\"center\"\n                      justifyContent=\"center\"\n                      width=\"100%\"\n                      height=\"100%\"\n                      minHeight=\"160px\"\n                      p=\"48px\"\n                      mb=\"16px\"\n                      fontSize=\"1rem\"\n                      fontWeight=\"bold\"\n                      color=\"grey\"\n                      bg={isDragActive ? 'lightGrey' : 'white'}\n                      {...getRootProps()}>\n                        <input {...getInputProps()} />\n                        Drop your menus here or click to upload\n                      </Uploader>\n                    </section>\n                  )}\n                </Dropzone>\n                {this.state.menus.map((file, i) =>\n                  <File key={file.path}\n                    width=\"100%\"\n                    display=\"inline-flex\"\n                    justifyContent=\"space-between\"\n                    alignItems=\"center\"\n                    p=\"16px 24px\"\n                    borderRadius=\"8px\"\n                    bg=\"black\"\n                    color=\"white\"\n                    mb=\"8px\"\n                  >\n                    <span>{file.path}</span>\n                    <span onClick={() => this.removeFile(i)}>\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"#fff\">\n                        <path d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" />\n                      </svg>\n                    </span>\n                  </File>\n                )}\n                <Label\n                  fontSize=\".875rem\"\n                  fontWeight=\"bold\"\n                  color=\"grey\"\n                  mb=\"4px\"\n                  htmlFor=\"name\">\n                  Full name*\n                </Label>\n                <Input\n                  border=\"2px solid\"\n                  borderColor=\"black\"\n                  borderRadius=\"8px\"\n                  display=\"flex\"\n                  p=\"8px 16px\"\n                  mb=\"16px\"\n                  fontSize=\"1.25rem\"\n                  fontWeight=\"regular\"\n                  color=\"black\"\n                  placeholder=\"Your name\"\n                  type=\"text\"\n                  autoComplete=\"on\"\n                  required\n                  value={this.state.name}\n                  name=\"name\"\n                  onChange={(e) => this.handleChange(e)}\n                />\n                <Label\n                  fontSize=\".875rem\"\n                  fontWeight=\"bold\"\n                  color=\"grey\"\n                  mb=\"4px\"\n                  htmlFor=\"email\">\n                  Email*\n                </Label>\n                <Input\n                  border=\"2px solid\"\n                  borderColor=\"black\"\n                  borderRadius=\"8px\"\n                  display=\"flex\"\n                  flex=\"1\"\n                  p=\"8px 16px\"\n                  mb=\"16px\"\n                  fontSize=\"1.25rem\"\n                  fontWeight=\"regular\"\n                  color=\"black\"\n                  placeholder=\"Your email\"\n                  type=\"email\"\n                  autoComplete=\"on\"\n                  required\n                  value={this.state.email}\n                  name=\"email\"\n                  onChange={(e) => this.handleChange(e)}\n                />\n                <Submit\n                  border=\"2px solid\"\n                  borderRadius='8px'\n                  borderColor=\"black\"\n                  p=\"16px 24px\"\n                  fontSize=\"1rem\"\n                  fontWeight=\"bold\"\n                  color=\"black\"\n                  bg=\"blue\"\n                  type=\"submit\"\n                  value=\"Request your demo\"\n                />\n              </Fragment>\n            }\n          </Form>\n        </PageContent>\n        <Footer />\n      </PageWrapper>\n    );\n  }\n\n}\n\nexport default withRouter(RequestDemo);\n"]},"metadata":{},"sourceType":"module"}